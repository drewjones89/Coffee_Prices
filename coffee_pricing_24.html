<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Drew Jones">

<title>Pricing Among the Best of the Best</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="coffee_pricing_24_files/libs/clipboard/clipboard.min.js"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/popper.min.js"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="coffee_pricing_24_files/libs/quarto-html/anchor.min.js"></script>
<link href="coffee_pricing_24_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="coffee_pricing_24_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="coffee_pricing_24_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="coffee_pricing_24_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="coffee_pricing_24_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="coffee_pricing_24_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="coffee_pricing_24_files/libs/tabwid-1.1.3/tabwid.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pricing Among the Best of the Best</h1>
<p class="subtitle lead">Price analysis of top US coffee roasters in 2024</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Drew Jones </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.5.2</code></pre>
</div>
</div>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>I love coffee. I got into doing pourovers in 2021 and have not looked back since. Waking up and enjoying incredible filter coffee every morning is an essential part of my daily life, and has led to a number of wonderful experiences and strong friendships. When seeking out new coffees to try however, things can become complicated. The first is that there are more roasters than I could ever try in my life. Thankfully, Roastful assembled a list of the Top 100 Roasters in the world as selected by a panel of 32 industry experts. They will be the first to tell you the list is not definitive, however it does provide a good place to start seeking out excellent coffee.</p>
<section id="about-the-dataset" class="level5">
<h5 class="anchored" data-anchor-id="about-the-dataset">About the dataset</h5>
<p>The dataset I use here was built by me, by hand, in Microsoft Excel between December 23, 2024 and January 30, 2025. I collected information on the 168 invidividual cofffee offerings present on the websites of the 15 Top 100 Roasters located in the United States during that time period.</p>
</section>
<section id="initial-data-manipulation" class="level5">
<h5 class="anchored" data-anchor-id="initial-data-manipulation">Initial data manipulation</h5>
<p>Although I would consider 12 oz to be the most common bag size you might encounter in specialty coffee shops selling beans, in the supermarket, or online, only a few of the Top 100 roasters actually use it. In order to directly compare prices, I create the <code>adj_price</code> as <span class="math inline">\(12 \times \frac{\text{price}}{\text{bag\_size}}\)</span> . The purpose of this is to normalize the price per bag as though they all were 12 oz.</p>
</section>
<section id="data-dictionary" class="level5">
<h5 class="anchored" data-anchor-id="data-dictionary">Data dictionary</h5>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-59d52822{}.cl-59d2b2c2{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59d2b2cc{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59d3b276{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-59d3bc58{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59d3bc59{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59d3bc5a{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59d3bc5b{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-59d52822"><thead><tr style="overflow-wrap:break-word;"><th class="cl-59d3bc58"><p class="cl-59d3b276"><span class="cl-59d2b2c2">Variable</span></p></th><th class="cl-59d3bc58"><p class="cl-59d3b276"><span class="cl-59d2b2c2">Description</span></p></th><th class="cl-59d3bc58"><p class="cl-59d3b276"><span class="cl-59d2b2c2">Type</span></p></th><th class="cl-59d3bc58"><p class="cl-59d3b276"><span class="cl-59d2b2c2">Class</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc59"><p class="cl-59d3b276"><span class="cl-59d2b2cc">roaster</span></p></td><td class="cl-59d3bc59"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Name of the coffee roaster</span></p></td><td class="cl-59d3bc59"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc59"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">name</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Name of the coffee offering</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">price</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Shelf price, in USD</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">double</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">numeric</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">bag_size</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Mass of the coffee in the bag, in OZ</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">double</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">numeric</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">origin_state</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Origin country for single-origin coffee</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">origin_region</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Geographic region in origin country</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">single</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Dummy variable, yes indicates the coffee is single-origin and no indicates it is a blend</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">farm</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Name of the producing farm, farmer, or washing station</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">importer</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Name of coffee importer. NA indicates the roaster imported on its own</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">process</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Coffee processing method</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">decaf</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Dummy variable, yes indicates the coffee has been decaffeinated</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">decaf_process</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Method of decaffeination used if applicable</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">varietal1</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">First listed variety of coffee</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">varietal2</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Second listed variety of coffee</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">varietal3</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Third listed variety of coffee</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">varietal4</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Fourth listed variety of coffee</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">blend_state1</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">First listed origin country for a blend</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">blend_state2</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Second listed origin country for a blend</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">blend_state3</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Third listed origin country for a blend</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">top100</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Dummy variable, yes indicates the roaster is on Roastful's Top 100 list</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td><td class="cl-59d3bc5a"><p class="cl-59d3b276"><span class="cl-59d2b2cc">character</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59d3bc5b"><p class="cl-59d3b276"><span class="cl-59d2b2cc">adj_price</span></p></td><td class="cl-59d3bc5b"><p class="cl-59d3b276"><span class="cl-59d2b2cc">Price normalized to 12 oz bag size</span></p></td><td class="cl-59d3bc5b"><p class="cl-59d3b276"><span class="cl-59d2b2cc">double</span></p></td><td class="cl-59d3bc5b"><p class="cl-59d3b276"><span class="cl-59d2b2cc">numeric</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Roaster websites vary greatly. There are a variety of naming conventions, levels of transparency, and accessibility of data on the coffees they sell. As a result, some of the observations have my subjective interpretations of data. <code>farm</code> is the farm the coffee was grown on, the name of the farmer who grew it, or the washing station that processed the coffee (the case for most African coffees). My entry follows that order, I named the farm if at all possible, but would settle for the specifc farmer or washing station if needed. <code>process</code> can vary from roaster to roaster. Passenger Coffee calls Natural Process “Dry” and Washed Process “Wet”, for example. There, I substituted the more common names. For the more complex, advanced processes, I tended to simplify them to braod terms like “Anaerobic Washed” even if the website said something like “92 Hour Extended Fermentation Experimental Washed”. Truly unique processes are included though, such as “Zero Fermentation” from Archetype Coffee.</p>
<p>Some roasters offer coffees in various size bags. I collected data on the size option that was closest to my 12 oz ideal. These roasters that sell 2 lbs bags certainly offer a greater value there, but that is not how I buy coffee.</p>
</section>
</section>
<section id="exploratory-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h3>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-59e09c7a{}.cl-59de779c{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59de77a6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59df5752{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-59df5753{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-59df61d4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61d5{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61d6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61de{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61e8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61e9{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61ea{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59df61f2{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-59e09c7a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-59df61d4"><p class="cl-59df5752"><span class="cl-59de779c">skim_variable</span></p></th><th class="cl-59df61d5"><p class="cl-59df5753"><span class="cl-59de779c">n_missing</span></p></th><th class="cl-59df61d5"><p class="cl-59df5753"><span class="cl-59de779c">complete_rate</span></p></th><th class="cl-59df61d5"><p class="cl-59df5753"><span class="cl-59de779c">character.n_unique</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-59df61d6"><p class="cl-59df5752"><span class="cl-59de77a6">roaster</span></p></td><td class="cl-59df61de"><p class="cl-59df5753"><span class="cl-59de77a6">0</span></p></td><td class="cl-59df61de"><p class="cl-59df5753"><span class="cl-59de77a6">1.000000000</span></p></td><td class="cl-59df61de"><p class="cl-59df5753"><span class="cl-59de77a6">15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">name</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1.000000000</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">119</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">origin_state</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.991935484</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">17</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">origin_region</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">12</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.903225806</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">53</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">single</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1.000000000</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">farm</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">23</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.814516129</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">88</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">importer</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">114</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.080645161</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">process</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">10</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.919354839</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">18</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">decaf</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1.000000000</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">decaf_process</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">115</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.072580645</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">varietal1</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">17</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.862903226</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">33</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">varietal2</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">96</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.225806452</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">varietal3</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">110</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.112903226</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">10</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">varietal4</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">121</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.024193548</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">blend_state1</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">123</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.008064516</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">blend_state2</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">123</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.008064516</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61e8"><p class="cl-59df5752"><span class="cl-59de77a6">blend_state3</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">123</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">0.008064516</span></p></td><td class="cl-59df61e9"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59df61ea"><p class="cl-59df5752"><span class="cl-59de77a6">top100</span></p></td><td class="cl-59df61f2"><p class="cl-59df5753"><span class="cl-59de77a6">0</span></p></td><td class="cl-59df61f2"><p class="cl-59df5753"><span class="cl-59de77a6">1.000000000</span></p></td><td class="cl-59df61f2"><p class="cl-59df5753"><span class="cl-59de77a6">1</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In <em>Figure 2</em>, exploratory data analysis of the character variables are shown. There are 15 Top 100 Roasters in the US, and they featured a total of 119 single origin coffees during the data collection period. These coffees came from 88 producers in 17 different origin countries, were processed 18 different ways, and are made up of dozens of distinct varietals. High levels of missing values in <code>varietal2</code>, <code>varietal3</code> <code>varietal4</code> are explained by the fact that most coffees feature a single varietal.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-59ec5308{}.cl-59ea35aa{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59ea35b4{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-59eb131c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-59eb1326{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-59eb1c9a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1c9b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1c9c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1c9d{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1c9e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1ca4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1ca5{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-59eb1ca6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-59ec5308"><thead><tr style="overflow-wrap:break-word;"><th class="cl-59eb1c9a"><p class="cl-59eb131c"><span class="cl-59ea35aa">skim_variable</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">n_missing</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">complete_rate</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.mean</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.p0</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.p25</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.p50</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.p75</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.p100</span></p></th><th class="cl-59eb1c9b"><p class="cl-59eb1326"><span class="cl-59ea35aa">numeric.sd</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-59eb1c9c"><p class="cl-59eb131c"><span class="cl-59ea35b4">price</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">3</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">0.9758065</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">30.102479</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">14.0</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">22.00000</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">24.00000</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">28.00000</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">196.5</span></p></td><td class="cl-59eb1c9d"><p class="cl-59eb1326"><span class="cl-59ea35b4">22.353796</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59eb1c9e"><p class="cl-59eb131c"><span class="cl-59ea35b4">bag_size</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">0</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">1.0000000</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">9.903805</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">3.5</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">8.81849</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">10.00000</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">10.50000</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">12.0</span></p></td><td class="cl-59eb1ca4"><p class="cl-59eb1326"><span class="cl-59ea35b4">1.838486</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-59eb1ca5"><p class="cl-59eb131c"><span class="cl-59ea35b4">adj_price</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">3</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">0.9758065</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">39.873195</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">20.0</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">24.00000</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">28.57632</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">34.01943</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">235.8</span></p></td><td class="cl-59eb1ca6"><p class="cl-59eb1326"><span class="cl-59ea35b4">33.656227</span></p></td></tr></tbody></table></div>
</div>
</div>
<p><em>Figure 3</em> shows explatoratory data analysis for the numeric variables. There are 3 observations with missing values. These all come from Botz Coffee, where all menu options were sold out at the time of data collection, and at the time of writing. The median estimated price for a 12 oz bag is $28.57. The lowest adjusted price for a bag is $20 and the greatest is $235.80.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Scale for fill is already present.
Adding another scale for fill, which will replace the existing scale.
Ignoring unknown labels:
• legend : "% Missing"</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coffee_pricing_24_files/figure-html/missingness%20viz-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coffee_pricing_24_files/figure-html/price%20histogram-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><em>Figure 5</em> shows that most of the coffees occupy the $20-$40 range. There are some, however, that are extremely expensive, totaling over $100 for an estimated 12 oz. bag. What are these coffees, and what might explain these prices?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>coffee_clean <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bag_size <span class="sc">&lt;</span> <span class="fl">7.5</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(adj_price)) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="dv">2</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(bag_size, name, roaster, adj_price, origin_state, process, varietal1, varietal2) <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_vanilla</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_caption</span>(<span class="at">caption =</span> <span class="st">"Figure 8: Blendin accounts for most of the smallest bags"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `across(where(is.numeric), round, 2)`.
Caused by warning:
! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.
Supply arguments directly to `.fns` through an anonymous function instead.

  # Previously
  across(a:b, mean, na.rm = TRUE)

  # Now
  across(a:b, \(x) mean(x, na.rm = TRUE))</code></pre>
</div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-5a24cb7a{}.cl-5a22686c{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a22686d{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a2382b0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a2382ba{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a238bfc{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238bfd{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c06{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c07{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c08{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c09{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c0a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a238c10{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-5a24cb7a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-5a238bfc"><p class="cl-5a2382b0"><span class="cl-5a22686c">bag_size</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">name</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">roaster</span></p></th><th class="cl-5a238bfc"><p class="cl-5a2382b0"><span class="cl-5a22686c">adj_price</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">origin_state</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">process</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">varietal1</span></p></th><th class="cl-5a238bfd"><p class="cl-5a2382ba"><span class="cl-5a22686c">varietal2</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5a238c06"><p class="cl-5a2382b0"><span class="cl-5a22686d">3.53</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d">El Paraiso Zeo</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d">Archetype</span></p></td><td class="cl-5a238c06"><p class="cl-5a2382b0"><span class="cl-5a22686d">170.10</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d">Colombia</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d">Zeo Drying</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d">Geisha</span></p></td><td class="cl-5a238c07"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">3.50</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Finca La Mula</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Blendin</span></p></td><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">157.71</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Panama</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Natural</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Geisha</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">3.50</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">La Negrita</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Blendin</span></p></td><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">120.00</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Colombia</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Anaerobic Natural</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Wush Wush</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">3.50</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Gesha Village</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Blendin</span></p></td><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">102.86</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Ethiopia</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Natural</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Geisha</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">3.50</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Hacienda Copey Geisha</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Blendin</span></p></td><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">96.00</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Costa Rica</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Anaerobic Honey</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Geisha</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">5.29</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Vinka Sidra</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Prodigal</span></p></td><td class="cl-5a238c08"><p class="cl-5a2382b0"><span class="cl-5a22686d">83.91</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Ecuador</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Anaerobic Washed</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d">Sidra</span></p></td><td class="cl-5a238c09"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a238c0a"><p class="cl-5a2382b0"><span class="cl-5a22686d">5.29</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d">Espejo</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d">Prodigal</span></p></td><td class="cl-5a238c0a"><p class="cl-5a2382b0"><span class="cl-5a22686d">79.38</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d">Colombia</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d">Wahsed</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d">Geisha</span></p></td><td class="cl-5a238c10"><p class="cl-5a2382ba"><span class="cl-5a22686d"></span></p></td></tr></tbody></table></div>
</div>
</div>
<p><em>Figure 8</em> shows that most of these 7 small bags come from a single roaster, Blendin.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-5a2c6dc6{}.cl-5a2a4816{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a2a4820{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a2b2182{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a2b218c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a2b2a4c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a4d{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a4e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a4f{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a50{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a56{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a57{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a2b2a58{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-5a2c6dc6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-5a2b2a4c"><p class="cl-5a2b2182"><span class="cl-5a2a4816">adj_price</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">name</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">roaster</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">origin_state</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">process</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">varietal1</span></p></th><th class="cl-5a2b2a4d"><p class="cl-5a2b218c"><span class="cl-5a2a4816">varietal2</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a4e"><p class="cl-5a2b2182"><span class="cl-5a2a4820">235.80</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Familia Morales Rivera COE</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Passenger</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Ecuador</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Anaerobic Washed</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Sidra</span></p></td><td class="cl-5a2b2a4f"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Mejorado</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a50"><p class="cl-5a2b2182"><span class="cl-5a2a4820">170.10</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">El Paraiso Zeo</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Archetype</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Colombia</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Zeo Drying</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Geisha</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a50"><p class="cl-5a2b2182"><span class="cl-5a2a4820">168.00</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Tio Conejo</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Onyx</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Colombia</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Natural</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Geisha</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a50"><p class="cl-5a2b2182"><span class="cl-5a2a4820">157.71</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Finca La Mula</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Blendin</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Panama</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Natural</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Geisha</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a50"><p class="cl-5a2b2182"><span class="cl-5a2a4820">120.00</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">La Negrita</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Blendin</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Colombia</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Anaerobic Natural</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Wush Wush</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a50"><p class="cl-5a2b2182"><span class="cl-5a2a4820">106.20</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Familia Morales Rivera</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Passenger</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Ecuador</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Anaerobic Washed</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Sidra</span></p></td><td class="cl-5a2b2a56"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Mejorado</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a2b2a57"><p class="cl-5a2b2182"><span class="cl-5a2a4820">102.86</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Gesha Village</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Blendin</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Ethiopia</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Natural</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820">Geisha</span></p></td><td class="cl-5a2b2a58"><p class="cl-5a2b218c"><span class="cl-5a2a4820"></span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The most expensive coffee here in <em>Figure 7</em> is Familia Morales Rivera from Passenger Coffee. COE indicats this particular coffee won a Cup of Excellence competition in Ecudador, which means that it was recognized for exceptional quality and auctioned off for an exceptional price, in this case $235.80 for an estimated 12 oz. bag. The sixth coffee is here appears to be from the same lot, although from the following year’s harverst, and the price reflects the expectation that the quality would be exceedingly high.</p>
<p>Some of these coffees are priced so highly due to the technical details of their processing. El Paraiso Zeo from Archetype Coffee was processed in a way I was completely unfamiliar with, “Zeo Drying.” I labeled La Negrita from Blending Coffee Club as “Anaerobic Natural,” however the website details further steps outside of the standard Anaerobic Natural, suggesting the time, energy, and money to prodcue these beans is especially high as well.</p>
<p>As for the rest, these are coffees that come from highly respected farms with pedigree growing for brewing competitions. Gesha Village, for example, is one of the only truly micro-lot growing farms in Ethiopia.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coffee_pricing_24_files/figure-html/bag%20size%20and%20price-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In <em>Figure 6</em> it is apparent that the 7 coffees with especially small bags are outliers. The most expensive coffee has a <code>bag_size</code> around 10 oz.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-5a422daa{}.cl-5a401dee{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a401df8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5a40f6d8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a40f6e2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5a40ff8e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ff8f{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ff98{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ff99{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ff9a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ff9b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ffa2{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5a40ffa3{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-5a422daa"><thead><tr style="overflow-wrap:break-word;"><th class="cl-5a40ff8e"><p class="cl-5a40f6d8"><span class="cl-5a401dee">roaster</span></p></th><th class="cl-5a40ff8f"><p class="cl-5a40f6e2"><span class="cl-5a401dee">median_adj_price</span></p></th><th class="cl-5a40ff8f"><p class="cl-5a40f6e2"><span class="cl-5a401dee">mean_adj_price</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff98"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Prodigal</span></p></td><td class="cl-5a40ff99"><p class="cl-5a40f6e2"><span class="cl-5a401df8">63.95653</span></p></td><td class="cl-5a40ff99"><p class="cl-5a40f6e2"><span class="cl-5a401df8">60.78140</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Flowerchild</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">34.01943</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">42.04802</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Sey</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">33.16894</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">33.11224</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Isle</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">31.29788</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">36.60491</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Intelligentsia</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">31.00000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">29.00000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Blendin</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">30.00000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">60.12468</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Hex</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">29.25000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">28.40000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Onyx</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">28.80000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">50.75000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Black &amp; White</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">28.00000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">32.37500</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Archetype</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">27.60000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">51.04242</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Heart</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">26.28571</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">25.35065</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Cat &amp; Cloud</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">26.10000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">26.05333</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ff9a"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Passenger</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">25.65000</span></p></td><td class="cl-5a40ff9b"><p class="cl-5a40f6e2"><span class="cl-5a401df8">50.55000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5a40ffa2"><p class="cl-5a40f6d8"><span class="cl-5a401df8">Tandem Coffee Roasters</span></p></td><td class="cl-5a40ffa3"><p class="cl-5a40f6e2"><span class="cl-5a401df8">22.00000</span></p></td><td class="cl-5a40ffa3"><p class="cl-5a40f6e2"><span class="cl-5a401df8">22.16667</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Figure 6 shows the 15 roasters ranked by <code>median_adj_price</code>, and also shows <code>mean_adj_price</code> and Prodigal stands out as significantly more exp</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>